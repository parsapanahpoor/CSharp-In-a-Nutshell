<div dir="ltr" style="text-align: left;">

## â“ Q16:

## How do Abstract Class Instantiation and Memory Layout work?

### âœ… Deep Answer:

Abstract Class cannot be **directly** instantiated, but can be instantiated through **Derived Classes**.

### ğŸ” Memory Layout:

<div dir="ltr" style="text-align: left;">

```csharp
abstract class Animal {
    protected string name;
    public abstract void Speak();
    public void Sleep() { }
}

class Dog : Animal {
    private int age;
    public override void Speak() { }
}
```

<div dir="ltr" style="text-align: left;">

### ğŸ“Š Memory Structure:

<div dir="ltr" style="text-align: left;">

```
Dog Object in Heap:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Object Header           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Type Handle (Dog)       â”‚ â†’ Points to Dog Type Info
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Animal.name (string)    â”‚ â†’ Base class field
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dog.age (int)           â”‚ â†’ Derived class field
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<div dir="ltr" style="text-align: left;">

### âš™ï¸ Instantiation Process:

<div dir="ltr" style="text-align: left;">

```csharp
Dog dog = new Dog();

// What happens:
// 1. Memory for Dog object is allocated
// 2. Base class fields (Animal.name) are initialized
// 3. Derived class fields (Dog.age) are initialized
// 4. Base constructor is called
// 5. Derived constructor is called
// 6. VMT for Dog is created (with override methods)
```

<div dir="ltr" style="text-align: left;">

### ğŸ”¬ VMT for Abstract Methods:

<div dir="ltr" style="text-align: left;">

```
Dog VMT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [0] Dog.Speak()     â”‚ â†’ Overridden from Animal
â”‚ [1] Animal.Sleep()  â”‚ â†’ Inherited from Animal
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<div dir="ltr" style="text-align: left;">

### ğŸ¯ Advanced Note:

Abstract Methods are **not** in VMT! Only overridden ones are in VMT. Abstract Methods are only stored in **Metadata**.

### âš ï¸ Important:

Abstract Class **cannot** be directly instantiated because it's **incomplete**. All abstract methods must be implemented.
