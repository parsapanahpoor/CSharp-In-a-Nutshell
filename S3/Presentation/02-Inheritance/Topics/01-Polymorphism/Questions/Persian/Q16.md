<div dir="rtl" style="text-align: right;">

## â“ Q16:

## Virtual Method Table (VMT) Ø¯Ù‚ÛŒÙ‚Ø§ Ú†Ø·ÙˆØ± Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŸ

### âœ… Ø¬ÙˆØ§Ø¨ Ø¹Ù…ÛŒÙ‚:

Ù‡Ø± Ú©Ù„Ø§Ø³ Ø¨Ø§ Ù…ØªØ¯Ù‡Ø§ÛŒ virtual ÛŒÚ© **VMT** Ø¯Ø§Ø±Ù‡ Ú©Ù‡ Ø¯Ø± Ø²Ù…Ø§Ù† Ø§Ø¬Ø±Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ù‡.

<div dir="ltr" style="text-align: left;">

```csharp
class Animal {
    public virtual void Speak() => Console.WriteLine("Animal");
    public virtual void Move() => Console.WriteLine("Moving");
}

class Dog : Animal {
    public override void Speak() => Console.WriteLine("Woof");
    // Move() override Ù†Ø´Ø¯Ù‡
}

class Cat : Animal {
    public override void Speak() => Console.WriteLine("Meow");
    public override void Move() => Console.WriteLine("Sneaking");
}
```

<div dir="rtl" style="text-align: right;">

### ğŸ” Ø³Ø§Ø®ØªØ§Ø± VMT Ø¯Ø± Memory:

<div dir="ltr" style="text-align: left;">

```
Animal VMT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [0] Animal.Speak()  â”‚ â†’ Address: 0x1000
â”‚ [1] Animal.Move()   â”‚ â†’ Address: 0x2000
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Dog VMT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [0] Dog.Speak()     â”‚ â†’ Address: 0x3000 (Override Ø´Ø¯Ù‡)
â”‚ [1] Animal.Move()   â”‚ â†’ Address: 0x2000 (Ø§Ø² Base Ø§Ø±Ø« Ø¨Ø±Ø¯Ù‡)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cat VMT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [0] Cat.Speak()     â”‚ â†’ Address: 0x4000 (Override Ø´Ø¯Ù‡)
â”‚ [1] Cat.Move()      â”‚ â†’ Address: 0x5000 (Override Ø´Ø¯Ù‡)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<div dir="rtl" style="text-align: right;">

### âš™ï¸ Ù…Ú©Ø§Ù†ÛŒØ²Ù… ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ:

<div dir="ltr" style="text-align: left;">

```csharp
Animal animal = new Dog();
animal.Speak();  // Ú†Ù‡ Ø§ØªÙØ§Ù‚ÛŒ Ù…ÛŒâ€ŒØ§ÙØªÙ‡ØŸ

// 1. Runtime Ù†ÙˆØ¹ ÙˆØ§Ù‚Ø¹ÛŒ Ø±Ùˆ Ú†Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡: Dog
// 2. Ø¨Ù‡ VMT Ú©Ù„Ø§Ø³ Dog Ù…ÛŒâ€ŒØ±Ù‡
// 3. Index [0] Ø±Ùˆ Ù…ÛŒâ€ŒØ®ÙˆÙ†Ù‡ (Ù…ØªØ¯ Speak)
// 4. Ø¨Ù‡ Ø¢Ø¯Ø±Ø³ 0x3000 Ù…ÛŒâ€ŒÙ¾Ø±Ù‡ â†’ Dog.Speak() Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´Ù‡
```

<div dir="rtl" style="text-align: right;">

### ğŸ¯ Ù†Ú©Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡:

- **VMT Ø¯Ø± Object Header** Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´Ù‡ (8 bytes overhead)
- Ù‡Ø± Ú©Ù„Ø§Ø³ ÙÙ‚Ø· **ÛŒÚ© VMT** Ø¯Ø§Ø±Ù‡ (shared Ø¨ÛŒÙ† Ù‡Ù…Ù‡ instance Ù‡Ø§)
- **Index Ù‡Ø§** Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ±ØªÛŒØ¨ ØªØ¹Ø±ÛŒÙ Ù…ØªØ¯Ù‡Ø§ÛŒ virtual Ù‡Ø³ØªÙ†Ø¯
- Ø§Ú¯Ø± Ù…ØªØ¯ override Ù†Ø´Ù‡ØŒ VMT Ø¨Ù‡ Ù…ØªØ¯ Base Ø§Ø´Ø§Ø±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù‡

### âš ï¸ Performance:

- Virtual Call = 2-3 CPU cycles (Ø¨Ø§ÛŒØ¯ VMT Ø±Ùˆ Ú†Ú© Ú©Ù†Ù‡)
- Direct Call = 1 CPU cycle (Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ Ø¢Ø¯Ø±Ø³ Ù…ÛŒâ€ŒÙ¾Ø±Ù‡)

