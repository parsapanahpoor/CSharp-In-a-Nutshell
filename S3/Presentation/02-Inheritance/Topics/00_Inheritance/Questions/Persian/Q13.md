<div dir="rtl" style="text-align: right;">

## ❓ Q13:

## Field Hiding خطرناکه؟ چه مشکلاتی ایجاد می‌کنه؟

### 💡 مشکل:

<div dir="ltr" style="text-align: left;">


```csharp
class Base {
public int Value = 10;
}

class Derived : Base {
public new int Value = 20;  // ⚠️ Field Hiding
}

Base obj1 = new Derived();
Console.WriteLine(obj1.Value);        // 10 😱

Derived obj2 = new Derived();
Console.WriteLine(obj2.Value);        // 20 😱

// یه متغیر، دو مقدار مختلف! 🤯

```
<div dir="rtl" style="text-align: right;">

### ✅ تحلیل عمیق:

<div dir="ltr" style="text-align: left;">


```csharp
class Base {
public int Value = 10;
}

class Derived : Base {
public new int Value = 20;
}

var obj = new Derived();

// Memory Layout واقعی:
// [Derived Object]
// ├─ Base.Value = 10    ← obj به عنوان Base
// └─ Derived.Value = 20 ← obj به عنوان Derived

Console.WriteLine(obj.Value);              // 20 (Derived)
Console.WriteLine(((Base)obj).Value);      // 10 (Base) 😱
Console.WriteLine(obj.GetType().GetField("Value").GetValue(obj)); // 20

```

### 🎯 Best Practice:

```csharp
// ❌ بد: Field Hiding
class Derived : Base {
public new int Value = 20;
}

// ✅ خوب: Property Override
class Base {
public virtual int Value { get; set; } = 10;
}

class Derived : Base {
public override int Value { get; set; } = 20;
}

```

<div dir="rtl" style="text-align: right;">

### ⚠️ خطرات Field Hiding:

- **Polymorphism شکسته می‌شه**: نوع Reference تعیین می‌کنه کدوم مقدار برگرده
- **Bug های پنهان**: رفتار غیرمنتظره در Runtime
- **نقض LSP**: جایگزینی Base با Derived ایمن نیست
- **Maintenance جهنم**: دو فیلد با یک اسم در حافظه!

### 💡 نتیجه:

از Field Hiding **هیچ وقت** استفاده نکن! اگه نیاز به تغییر رفتار داری، از Property با `virtual`/`override` استفاده کن.
