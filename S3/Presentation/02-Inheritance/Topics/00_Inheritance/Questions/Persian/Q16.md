<div dir="rtl" style="text-align: right;">

## â“ Q16:

## Object Header Ùˆ Memory Layout Ø¯Ø± Inheritance Ú†Ø·ÙˆØ±ÛŒÙ‡ØŸ

### âœ… Ø¬ÙˆØ§Ø¨ Ø¹Ù…ÛŒÙ‚:

Ù‡Ø± Ø´ÛŒ Ø¯Ø± .NET ÛŒÚ© **Object Header** Ø¯Ø§Ø±Ù‡ Ú©Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ù‡Ù…ÛŒ Ø±Ùˆ Ù†Ú¯Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ø±Ù‡.

### ğŸ” Ø³Ø§Ø®ØªØ§Ø± Ú©Ø§Ù…Ù„ Memory:

<div dir="ltr" style="text-align: left;">

```csharp
class Base {
    public int X = 10;
    public string Name = "Base";
}

class Derived : Base {
    public int Y = 20;
    public double Value = 3.14;
}

Derived obj = new Derived();
```

<div dir="rtl" style="text-align: right;">

### ğŸ“Š Memory Layout Ø¯Ø± Heap:

<div dir="ltr" style="text-align: left;">

```
[Derived Object in Heap]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Object Header (8 bytes)                 â”‚ â†’ SyncBlock, HashCode
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Type Handle / Method Table (8 bytes)    â”‚ â†’ Pointer to Derived Type Info
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Base Fields (Ø§Ø² Base class)            â”‚
â”‚ â”œâ”€ X (int, 4 bytes)                     â”‚
â”‚ â””â”€ Name (string reference, 8 bytes)     â”‚ â†’ Pointer to string object
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Derived Fields (Ø§Ø² Derived class)       â”‚
â”‚ â”œâ”€ Y (int, 4 bytes)                     â”‚
â”‚ â””â”€ Value (double, 8 bytes)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total: 8 + 8 + 4 + 8 + 4 + 8 = 40 bytes (Ø¨Ø¯ÙˆÙ† padding)
```

<div dir="rtl" style="text-align: right;">

### ğŸ”¬ Ø¬Ø²Ø¦ÛŒØ§Øª Object Header:

<div dir="ltr" style="text-align: left;">

```csharp
// Object Header Ø´Ø§Ù…Ù„:
// 1. SyncBlock Index (Ø¨Ø±Ø§ÛŒ lock, Monitor)
// 2. HashCode (Ø§Ú¯Ø± GetHashCode() ØµØ¯Ø§ Ø²Ø¯Ù‡ Ø´Ø¯Ù‡)
// 3. Flags (Ø¨Ø±Ø§ÛŒ GC, Finalization)

// Type Handle Ø´Ø§Ù…Ù„:
// 1. Pointer Ø¨Ù‡ Type Metadata
// 2. Pointer Ø¨Ù‡ Virtual Method Table (VMT)
// 3. Interface Map
// 4. Field Layout Information
```

<div dir="rtl" style="text-align: right;">

### âš™ï¸ Field Layout Order:

1. **Base class fields** Ù‡Ù…ÛŒØ´Ù‡ Ø§ÙˆÙ„ Ù…ÛŒâ€ŒØ¢Ù†
2. **Derived class fields** Ø¨Ø¹Ø¯ Ù…ÛŒâ€ŒØ¢Ù†
3. **Padding** Ø¨Ø±Ø§ÛŒ alignment (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ 4 ÛŒØ§ 8 bytes)

### ğŸ¯ Ù†Ú©Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡:

- **Field Offset** Ø¯Ø± compile-time ØªØ¹ÛŒÛŒÙ† Ù…ÛŒâ€ŒØ´Ù‡
- **Memory Alignment** Ø¨Ø±Ø§ÛŒ performance (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ 8 bytes)
- **Type Handle** shared Ø¨ÛŒÙ† Ù‡Ù…Ù‡ instance Ù‡Ø§ÛŒ ÛŒÚ© Ù†ÙˆØ¹
- **Object Header** overhead Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø´ÛŒ (16 bytes)

### âš ï¸ Performance Impact:

- Inheritance = **Zero runtime cost** Ø¨Ø±Ø§ÛŒ field access
- ÙÙ‚Ø· **Memory overhead** Ø¯Ø§Ø±Ù‡ (Object Header)
- Field access = **Direct memory access** (Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹)

