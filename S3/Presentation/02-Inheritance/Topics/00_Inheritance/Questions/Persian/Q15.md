<div dir="rtl" style="text-align: right;">


## ❓ Q15:

## Covariance/Contravariance در Inheritance چیه؟

## ✅ جواب:

<div dir="ltr" style="text-align: left;">


```csharp
// Covariance: Return Type می‌تونه Derived باشه
class Animal { }
class Dog : Animal { }

class AnimalShelter {
public virtual Animal GetAnimal() => new Animal();
}

class DogShelter : AnimalShelter {
public override Dog GetAnimal() => new Dog(); // ✅ C# 9+ (Covariant Return Types)
}

```

<div dir="rtl" style="text-align: right;">


## ❌ قبل از C# 9:

<div dir="ltr" style="text-align: left;">


```csharp
class AnimalShelter {
public virtual Animal GetAnimal() => new Animal();
}

class DogShelter : AnimalShelter {
public override Animal GetAnimal() => new Dog(); // ❌ باید Animal برگردونیم
}

```

<div dir="rtl" style="text-align: right;">


## Contravariance (Parameter Types):

<div dir="ltr" style="text-align: left;">


```csharp
// ❌ C# اجازه نمی‌ده:
class Base {
public virtual void Process(Dog dog) { }
}

class Derived : Base {
public override void Process(Animal animal) { } // ❌ Error: Contravariance not supported
}

// چرا؟ مشکل Type Safety:
Base obj = new Derived();
obj.Process(new Dog()); // Derived.Process() منتظر Animal است، اما Dog دریافت می‌کنه!
```