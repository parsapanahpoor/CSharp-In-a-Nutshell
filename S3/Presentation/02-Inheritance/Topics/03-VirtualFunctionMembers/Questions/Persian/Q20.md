<div dir="rtl" style="text-align: right;">

## â“ Q20:

## Virtual Method Calls Ø¨Ø§ Reflection Ùˆ Dynamic Dispatch Ú†Ø·ÙˆØ± Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†ØŸ

### âœ… Ø¬ÙˆØ§Ø¨ Ø¹Ù…ÛŒÙ‚:

Reflection Ùˆ Dynamic Dispatch Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ method invocation Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ Ø¨Ø§ Virtual Methods Ù…ØªÙØ§ÙˆØªÙ†.

### ğŸ” Reflection Method Invocation:

<div dir="ltr" style="text-align: left;">

```csharp
class Animal {
    public virtual void Speak() => Console.WriteLine("Animal");
}

class Dog : Animal {
    public override void Speak() => Console.WriteLine("Dog");
}

Animal animal = new Dog();

// Ø¨Ø§ Reflection:
Type type = animal.GetType();
MethodInfo method = type.GetMethod("Speak");
method.Invoke(animal, null);  // âœ… "Dog" (Virtual dispatch Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡!)
```

<div dir="rtl" style="text-align: right;">

### ğŸ”¬ ØªÙØ§ÙˆØª Ø¨Ø§ Direct Call:

<div dir="ltr" style="text-align: left;">

```csharp
// Direct Call:
animal.Speak();  // ~2-3 CPU cycles (Virtual Call)

// Reflection:
MethodInfo method = typeof(Animal).GetMethod("Speak");
method.Invoke(animal, null);  // ~1000-10000 CPU cycles âš ï¸
// Ø¨Ø§ÛŒØ¯:
// 1. Metadata lookup
// 2. Method resolution
// 3. Virtual dispatch
// 4. Invocation
```

<div dir="rtl" style="text-align: right;">

### ğŸ” Dynamic Dispatch:

<div dir="ltr" style="text-align: left;">

```csharp
dynamic animal = new Dog();

// Dynamic Call:
animal.Speak();  // ~100-1000 CPU cycles âš ï¸
// DLR (Dynamic Language Runtime) Ø§ÛŒÙ† Ú©Ø§Ø±Ù‡Ø§ Ø±Ùˆ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡:
// 1. Type resolution
// 2. Method lookup
// 3. Virtual dispatch (Ø§Ú¯Ø± virtual Ø¨Ø§Ø´Ù‡)
// 4. Call site caching
```

<div dir="rtl" style="text-align: right;">

### ğŸ“Š Performance Comparison:

| Ø±ÙˆØ´ | CPU Cycles | Type Safety | Virtual Dispatch |
|-----|-----------|-------------|------------------|
| **Direct Call** | ~1 | âœ… Compile-time | âŒ |
| **Virtual Call** | ~2-3 | âœ… Runtime | âœ… |
| **Dynamic Call** | ~100-1000 | âš ï¸ Runtime | âœ… (Ø§Ú¯Ø± virtual Ø¨Ø§Ø´Ù‡) |
| **Reflection** | ~1000-10000 | âš ï¸ Runtime | âœ… (Ø§Ú¯Ø± virtual Ø¨Ø§Ø´Ù‡) |

### ğŸ”¬ Virtual Dispatch Ø¯Ø± Reflection:

<div dir="ltr" style="text-align: left;">

```csharp
// Reflection Ù‡Ù… Virtual Dispatch Ø±Ùˆ Ø±Ø¹Ø§ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ù‡:
Animal animal = new Dog();
MethodInfo method = typeof(Animal).GetMethod("Speak");

// Ø§ÛŒÙ† Virtual Call Ù…ÛŒâ€ŒØ²Ù†Ù‡ (Ù†Ù‡ Direct Call):
method.Invoke(animal, null);  // âœ… "Dog" (Virtual dispatch)
```

<div dir="rtl" style="text-align: right;">

### ğŸ¯ Ù†Ú©ØªÙ‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡:

**Reflection** Ùˆ **Dynamic** Ù‡Ø± Ø¯Ùˆ Virtual Dispatch Ø±Ùˆ **Ø±Ø¹Ø§ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ù†**! ÛŒØ¹Ù†ÛŒ Ø§Ú¯Ø± Ù…ØªØ¯ virtual Ø¨Ø§Ø´Ù‡ØŒ Ù…ØªØ¯ Derived Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´Ù‡.

### âš ï¸ Performance Warning:

Ø§Ø² Reflection Ùˆ Dynamic ÙÙ‚Ø· ÙˆÙ‚ØªÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù† Ú©Ù‡ **ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ù„Ø§Ø²Ù…Ù‡**! Performance overhead Ø®ÛŒÙ„ÛŒ Ø²ÛŒØ§Ø¯Ù‡.

### ğŸ’¡ Ø§Ø³ØªÙØ§Ø¯Ù‡ ØµØ­ÛŒØ­:

- **Direct/Virtual Call**: Ø¨Ø±Ø§ÛŒ Ú©Ø¯ Ø¹Ø§Ø¯ÛŒ (Ø¨Ù‡ØªØ±ÛŒÙ† performance)
- **Dynamic**: Ø¨Ø±Ø§ÛŒ interop Ø¨Ø§ dynamic languages ÛŒØ§ COM
- **Reflection**: Ø¨Ø±Ø§ÛŒ metadata inspection ÛŒØ§ plugin systems

