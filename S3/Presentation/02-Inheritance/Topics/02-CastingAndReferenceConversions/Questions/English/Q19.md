<div dir="ltr" style="text-align: left;">

## â“ Q19:

## How do Type Erasure and Runtime Type Information work with Casting in Generics?

### âœ… Deep Answer:

Unlike Java which has **Type Erasure**, C# **preserves Runtime Type Information**. This affects Casting.

### ğŸ” Type Information in C#:

<div dir="ltr" style="text-align: left;">

```csharp
class Container<T> {
    public T Value { get; set; }
}

Container<int> intContainer = new Container<int> { Value = 42 };
Container<string> strContainer = new Container<string> { Value = "Hello" };

// In C#, Type Information is preserved:
Type type1 = intContainer.GetType();   // Container`1[System.Int32]
Type type2 = strContainer.GetType();   // Container`1[System.String]

Console.WriteLine(type1 == type2);  // False âœ… (unlike Java!)
```

<div dir="ltr" style="text-align: left;">

### ğŸ”¬ Casting with Generic Types:

<div dir="ltr" style="text-align: left;">

```csharp
// âŒ Cannot do this:
Container<Animal> animalContainer = new Container<Dog>();  
// Error: Cannot convert Container<Dog> to Container<Animal>

// Why? Because Generic Types are Invariant (by default)
```

<div dir="ltr" style="text-align: left;">

### âœ… Solution: Covariant Interfaces

<div dir="ltr" style="text-align: left;">

```csharp
interface IContainer<out T> {
    T GetValue();
}

class Container<T> : IContainer<T> {
    private T value;
    public T GetValue() => value;
}

// Now Covariance works:
IContainer<Animal> animalContainer = new Container<Dog>();  // âœ…
// Because IContainer<out T>
```

<div dir="ltr" style="text-align: left;">

### ğŸ”¬ Runtime Type Checking:

<div dir="ltr" style="text-align: left;">

```csharp
Container<int> intContainer = new Container<int>();
Container<string> strContainer = new Container<string>();

// Runtime can detect Generic type:
if (intContainer is Container<int>) {  // âœ… True
    // ...
}

// We can even extract Generic Type:
Type genericType = intContainer.GetType().GetGenericArguments()[0];
Console.WriteLine(genericType);  // System.Int32 âœ…
```

<div dir="ltr" style="text-align: left;">

### ğŸ¯ Difference with Java:

| Feature | C# | Java |
|-------|----|----|
| **Type Erasure** | âŒ Doesn't have | âœ… Has |
| **Runtime Type Info** | âœ… Has | âŒ Doesn't have |
| **Casting with Generics** | âœ… Type-safe | âš ï¸ Type-unsafe |

### ğŸ’¡ Conclusion:

C# **preserves Type Safety** at runtime, but Java only at compile-time.
