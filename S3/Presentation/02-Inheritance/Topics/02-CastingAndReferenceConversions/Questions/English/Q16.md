<div dir="ltr" style="text-align: left;">

## â“ Q16:

## How do Runtime Type Checking and Type Information work in Casting?

### âœ… Deep Answer:

Every object in .NET has a **Type Handle** that holds type information. Casting uses this information.

### ğŸ” Type Information Structure:

<div dir="ltr" style="text-align: left;">

```csharp
class Animal { }
class Dog : Animal { }
class Cat : Animal { }

Animal animal = new Dog();

// GetType() returns the actual type:
Type actualType = animal.GetType();  // Dog âœ…
Type declaredType = typeof(Animal);   // Animal

Console.WriteLine(actualType == typeof(Dog));    // True âœ…
Console.WriteLine(actualType == typeof(Animal)); // False
```

<div dir="ltr" style="text-align: left;">

### ğŸ”¬ Runtime Type Check Mechanism:

<div dir="ltr" style="text-align: left;">

```csharp
// When you write this code:
Dog dog = (Dog)animal;

// Runtime does these things:
// 1. Reads Type Handle from Object Header
// 2. Checks Inheritance Chain
// 3. If Dog is in chain â†’ OK
// 4. If not â†’ InvalidCastException
```

<div dir="ltr" style="text-align: left;">

### ğŸ“Š Inheritance Chain Check:

<div dir="ltr" style="text-align: left;">

```
Animal (Base)
  â””â”€ Dog (Derived)
      â””â”€ Puppy (Derived from Dog)

// When checking animal is Puppy:
// Runtime checks this chain:
// 1. Is actual type = Puppy? â†’ No
// 2. Is Puppy in inheritance chain? â†’ Yes (if animal is actually Puppy)
```

<div dir="ltr" style="text-align: left;">

### âš™ï¸ Performance:

- **GetType()**: ~5-10 CPU cycles (must read Type Handle)
- **is operator**: ~1-2 CPU cycles (more optimized)
- **as operator**: ~1-2 CPU cycles (like is)
- **Direct cast**: ~1-2 CPU cycles + exception handling cost

### ğŸ¯ Advanced Note:

Type Information is stored in **Metadata** and accessible at runtime through **Reflection**.
