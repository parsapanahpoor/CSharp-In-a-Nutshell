<div dir="rtl" style="text-align: right;">

## ❓ Q14:

## Performance Casting چقدره؟

### ✅ جواب:

Casting در C# **خیلی سریع** است چون فقط یک **type check** در runtime انجام می‌شه.

<div dir="ltr" style="text-align: left;">

```csharp
Animal animal = new Dog();

// این کست‌ها خیلی سریع هستند:
Dog dog1 = (Dog)animal;        // ~1-2 CPU cycles
Dog? dog2 = animal as Dog;      // ~1-2 CPU cycles
bool isDog = animal is Dog;    // ~1-2 CPU cycles

// Pattern matching هم سریع است:
if (animal is Dog d) { }       // ~1-2 CPU cycles
```

<div dir="rtl" style="text-align: right;">

### 📊 مقایسه Performance:

| عملیات | CPU Cycles | توضیح |
|--------|-----------|-------|
| Upcast | ~0 | Compile-time (هیچ هزینه‌ای نداره) |
| Downcast | ~1-2 | Runtime type check |
| `as` | ~1-2 | مثل Downcast |
| `is` | ~1-2 | مثل Downcast |

### 🎯 نکته:

**Upcast** هیچ هزینه‌ای نداره چون در compile-time انجام می‌شه. فقط Downcast هزینه داره.

### ⚠️ مهم:

اگر خیلی زیاد کست می‌کنی، شاید بهتره از **Polymorphism** استفاده کنی!

