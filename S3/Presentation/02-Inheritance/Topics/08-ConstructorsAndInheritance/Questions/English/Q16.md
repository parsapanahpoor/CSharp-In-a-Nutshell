<div dir="ltr" style="text-align: left;">

## ‚ùì Q16:

## How exactly do Constructor Execution Order and Memory Initialization work?

### ‚úÖ Deep Answer:

Constructor Execution Order is very important and can cause bugs if not understood correctly.

### üîç Exact Initialization Order:

<div dir="ltr" style="text-align: left;">

```csharp
class Base {
    private static int baseStatic = Initialize("Base Static");
    private int baseField1 = Initialize("Base Field 1");
    
    static Base() {
        Console.WriteLine("Base Static Constructor");
    }
    
    public Base() {
        Console.WriteLine("Base Instance Constructor");
    }
    
    private int baseField2 = Initialize("Base Field 2");
    
    private static int Initialize(string name) {
        Console.WriteLine($"Initializing: {name}");
        return 0;
    }
}

class Derived : Base {
    private static int derivedStatic = Initialize("Derived Static");
    private int derivedField1 = Initialize("Derived Field 1");
    
    static Derived() {
        Console.WriteLine("Derived Static Constructor");
    }
    
    public Derived() : base() {
        Console.WriteLine("Derived Instance Constructor");
    }
    
    private int derivedField2 = Initialize("Derived Field 2");
    
    private static int Initialize(string name) {
        Console.WriteLine($"Initializing: {name}");
        return 0;
    }
}

new Derived();
```

<div dir="ltr" style="text-align: left;">

### üìä Exact Order:

1. **Base Static Field Initialization**
2. **Base Static Constructor**
3. **Derived Static Field Initialization**
4. **Derived Static Constructor**
5. **Base Instance Field 1**
6. **Base Instance Field 2**
7. **Base Instance Constructor**
8. **Derived Instance Field 1**
9. **Derived Instance Field 2**
10. **Derived Instance Constructor**

<div dir="ltr" style="text-align: left;">

### üéØ Advanced Note:

Field Initialization happens **before Constructor Body**. This can cause bugs if we use Derived Fields in Base Constructor.

### ‚ö†Ô∏è Problem:

<div dir="ltr" style="text-align: left;">

```csharp
class Base {
    public Base() {
        Initialize();  // ‚ö†Ô∏è Virtual method
    }
    
    protected virtual void Initialize() {
        Console.WriteLine("Base");
    }
}

class Derived : Base {
    private int value = 10;  // Not yet initialized!
    
    protected override void Initialize() {
        Console.WriteLine($"Derived: {value}");  // 0! ‚ùå
    }
}
```

<div dir="ltr" style="text-align: left;">

### üí° Solution:

**Don't** use Virtual Methods in Constructor! Or use Initialize Pattern.
