<div dir="ltr" style="text-align: left;">

## â“ Q20:

## How do Sealed Classes work with Memory Layout and Object Header?

### âœ… Deep Answer:

Sealed Classes **don't differ** from Non-Sealed Classes in Memory Layout, but JIT Compiler can optimize better.

### ğŸ” Memory Layout:

<div dir="ltr" style="text-align: left;">

```csharp
sealed class FinalClass {
    public int Value { get; set; }
    public string Name { get; set; }
}

FinalClass obj = new FinalClass();
```

<div dir="ltr" style="text-align: left;">

### ğŸ“Š Memory Structure:

<div dir="ltr" style="text-align: left;">

```
FinalClass Object in Heap:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Object Header           â”‚ â†’ SyncBlock, HashCode
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Type Handle             â”‚ â†’ Points to FinalClass Type Info
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Value (int)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name (string reference) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

<div dir="ltr" style="text-align: left;">

### ğŸ”¬ Difference with Non-Sealed:

**Memory Layout is the same!** But:

1. **Type Handle**: Points to Sealed Type Info
2. **VMT**: Can be smaller (because it won't be overridden)
3. **JIT Optimization**: Can make Direct Call

### âš™ï¸ JIT Optimization:

<div dir="ltr" style="text-align: left;">

```csharp
sealed class FinalClass {
    public virtual void Method() { }
}

FinalClass obj = new FinalClass();
obj.Method();  // JIT can make Direct Call!
```

<div dir="ltr" style="text-align: left;">

### ğŸ¯ Advanced Note:

Sealed Classes don't have **Memory Overhead**, but JIT Compiler can perform **Better Optimization** because it knows the class won't be extended.

### âš ï¸ Important:

Memory Layout is **the same**, but **Performance** is better because JIT can optimize.
